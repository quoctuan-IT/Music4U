{% load static %}

<!-- Song Card -->
<div class="col">
    <div class="card h-100 shadow-sm border-0 song-card">
        <!-- Cover Image -->
        <div class="position-relative overflow-hidden">
            <a href="{% url 'song_detail' song.id %}">

                {% if song.cover_image %}
                <img src="{{ song.cover_image.url }}" class="card-img-top" alt="{{ song.title }}"
                    style="height: 200px; object-fit: cover;">
                {% else %}
                <img src="{% static 'images/logo-IT.png' %}" class="card-img-top" alt="Default cover"
                    style="height: 200px; object-fit: cover;">
                {% endif %}

            </a>

            <!-- Play Button Overlay -->
            <div class="position-absolute top-50 start-50 translate-middle play-overlay d-none">
                <a class="btn btn-primary rounded-circle btn-lg" href="{% url 'song_detail' song.id %}">
                    <i class="bi bi-play-fill"></i>
                </a>
            </div>
        </div>

        <!-- Card Body -->
        <div class="card-body d-flex flex-column">
            <h6 class="card-title text-truncate mb-2" title="{{ song.title }}">
                {{ song.title }}
            </h6>
            <a class="card-text text-muted small text-truncate mb-2" title="{{ song.artist }}"
                href="{% url 'artist_detail' song.artist.id %}">
                <i class="bi bi-person me-1"></i>{{ song.artist }}
            </a>
        </div>

        <!-- Card Footer -->
        <div class="card-footer bg-transparent border-0 pt-0">
            <div class="d-flex gap-1">
                <a class="btn btn-outline-primary btn-sm flex-fill" title="Play" href="{% url 'song_detail' song.id %}">
                    <i class="bi bi-play-circle"></i>
                </a>

                {% if user.is_authenticated %}
                {% if song in user.favorite_songs.all %}
                <button class="btn btn-outline-danger btn-sm flex-fill btn-favorite" data-song-id="{{ song.id }}"
                    title="Remove from Favorites">‚ù§Ô∏è Liked</button>
                {% else %}
                <button class="btn btn-outline-danger btn-sm flex-fill btn-favorite" data-song-id="{{ song.id }}"
                    title="Add to Favorites">ü§ç Like</button>
                {% endif %}
                {% endif %}

            </div>
        </div>

    </div>
</div>


<style>
    /* Song Card */
    .song-card {
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        cursor: pointer;
    }

    .song-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15) !important;
    }

    .song-card:hover .play-overlay {
        display: block !important;
    }

    .song-card:hover .card-img-top {
        filter: brightness(0.8);
        transition: filter 0.3s ease;
    }

    /* Image container */
    .position-relative {
        border-radius: calc(0.375rem - 1px) calc(0.375rem - 1px) 0 0;
    }

    /* Responsive text sizing */
    @media (max-width: 576px) {
        .card-title {
            font-size: 0.95rem;
        }

        .song-card {
            width: 350px;
            margin-left: auto;
            margin-right: auto;
        }
    }

    /* Button hover effects */
    .btn-sm:hover {
        transform: scale(1.05);
        transition: transform 0.2s ease;
    }
</style>