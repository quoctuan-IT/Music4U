{% load static %}

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark shadow-sm fixed-top bg-dark">
  <div class="container-fluid">
    <!-- Brand -->
    <a class="navbar-brand d-flex align-items-center transition-base" href="/">
      <div class="d-flex align-items-center justify-content-center rounded-circle bg-light bg-opacity-10 me-2"
        style="width:40px;height:40px;">
        <img src="{% static 'images/logo-IT.png' %}" alt="Logo" width="30" height="30" class="rounded-circle">
      </div>
      <span class="fw-bold fs-2 text-uppercase brand-text" style="color: pink;">QT-M4U</span>
    </a>

    <!-- Toggle b utton -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent"
      aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Navbar content -->
    <div class="collapse navbar-collapse" id="navbarContent">
      <!-- Links -->
      <ul class="navbar-nav me-auto mb-2 mb-lg-0 justify-content-center flex-grow-1">
        <li class="nav-item mx-2">
          <a class="btn nav-link px-3 py-2 transition-base {% if request.resolver_match.url_name == 'index' %}active-link{% endif %}"
            href="{% url 'index' %}">
            Home
          </a>
        </li>

        <li class="nav-item mx-2">
          <a class="btn nav-link px-3 py-2 transition-base {% if request.resolver_match.url_name == 'artist' %}active-link{% endif %}"
            href="#">
            Artist
          </a>
        </li>
        
        <li class="nav-item mx-2">
          <a class="btn nav-link px-3 py-2 transition-base {% if request.resolver_match.url_name == 'songs' %}active-link{% endif %}"
            href="{% url 'songs' %}">
            Song
          </a>
        </li>
      </ul>

      <!-- User section -->
      {% if user.is_authenticated %}
      <div class="d-flex align-items-center flex-column flex-lg-row">
        <span class="navbar-text me-lg-3 text-white mb-2 mb-lg-0 text-center">
          Hi! <strong class="text-pink">{{ user.username }}</strong>
        </span>

        <div class="d-flex flex-column flex-lg-row gap-2">
          <a class="btn btn-outline-light btn-sm px-3 transition-base" href="{% url 'profile' %}">
            Profile
          </a>
          <a href="{% url 'logout' %}" class="btn btn-danger btn-sm px-3 transition-base">
            Logout
          </a>
        </div>
      </div>
      {% else %}
      <div class="d-flex flex-column flex-lg-row gap-2">
        <a href="{% url 'login' %}" class="btn btn-outline-light px-4 transition-base">
          Login
        </a>
        <a href="{% url 'register' %}" class="btn btn-light px-4 text-dark transition-base">
          Register
        </a>
      </div>
      {% endif %}

    </div>
  </div>
</nav>

<!-- Spacer for fixed navbar -->
<div style="padding: 2rem;"></div>


<style>
  /* Nav links */
  .nav-link:hover {
    color: black !important;
    background: pink;
    transform: translateY(-2px);
  }

  .nav-link.active-link {
    background: pink;
    color: black;
  }

  /* Buttons */
  .btn:hover {
    transform: translateY(-2px);
  }


  /* Responsive */
  @media (max-width: 991.98px) {
    .navbar-collapse {
      padding: 1rem 0;
    }

    .navbar-nav {
      text-align: center;
      margin-bottom: 1rem;
    }

    .nav-item {
      margin: 0.25rem 0;
    }

    .nav-link {
      display: block;
      margin: 0.25rem auto;
      max-width: 200px;
    }

    .d-flex.align-items-center {
      padding: 1rem 0;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .btn {
      min-width: 120px;
    }

    .brand-text {
      font-size: 1.5rem !important;
    }
  }

  @media (max-width: 575.98px) {
    .brand-text {
      font-size: 1.25rem !important;
    }

    .btn {
      width: 100%;
      min-width: unset;
    }

    .gap-2 {
      gap: 0.75rem !important;
    }
  }
</style>